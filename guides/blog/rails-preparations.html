<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rails preparations — Joosy Guides</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/skeleton.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/credits.css">
    <link rel="stylesheet" href="http://yandex.st/highlightjs/6.2/styles/default.min.css">
    <script src="http://cachedcommons.org/cache/modernizr/1.5.0/javascripts/modernizr-min.js"></script>
    <script src="/js/common.js"></script>
    <script src="/js/prefixfree.min.js"></script>
    <script src="/js/jquery-1.7.2.min.js"></script>
	<script src="/js/jquery.browser.js"></script>
    <script>
      function toggle(element) {
        element.style.display = (element.style.display == 'none') ? 'block' : 'none'
      }
    </script>
  </head>
  <body>
     <div class="topbar">
       <div class="topbar_wrap">
         <table cellpadding="0" cellspacing="0">
		   <tbody>
		     <tr>		    
			   <td><a href="http://joosy.ws">Joosy (1.1.0)</a></td>
			   <td class="disabled"><a href="#" >Who's using</a></td>
  			   <td><a href="http://sample.joosy.ws">Annotated sample</a></td>
			   <td class="active"><a href="http://guides.joosy.ws">Guides</a></td>
			   <td class="disabled"><a href="#" >Screencasts</a></td>
			   <td><a href="http://api.joosy.ws">API</a></td>
			   <td><a href="http://github.com/joosy/joosy">Code</a></td>
			   <td><a href="http://github.com/joosy/joosy/issues">Bugs/Patches</a></td>
			   <td  class="disabled"><a href="#">Community</a></td>
			   <td class="twitter">
  			     <a href="http://twitter.com/joosy_web">Twitter</a>
			     <img src="/img/twit_sign_orange.png" alt="">
			   </td>
		     </tr>
		   </tbody>
	     </table>
       </div>
     </div>
     <header>
      <div class="container">
        <div class="six columns">
          <h1><a href="/">Joosy Guides</a></h1>
        </div>
        <div class="ten columns">
          <ul class="nav">
            <li><a href="/">Home</a></li>
            <li>
              <a href="#" onclick="toggle(document.getElementById('guides'))" class="index">Guides Index &#9660;</a>
              <div style="display: none;" class="clearfix" id="guides">
                <hr />
                <dl class="L">
                  <dt>Joosy basics</dt>
                  <dd><a href="/guides/basics/getting-started.html">Getting Started</a></dd>
                  <dd><a href="/guides/basics/joosy-vs-x.html">Joosy vs X</a></dd>
                  <dt>Creating a blog on Joosy</dt>
                  <dd><a href="/guides/blog/rails-preparations.html">Rails preparations</a></dd>
                  <dd><a href="/guides/blog/resources.html">Resources</a></dd>
                  <dd><a href="/guides/blog/layouts-pages-and-routing.html">Layouts, Pages and Routing</a></dd>
                  <dd><a href="/guides/blog/elements-events-and-filters.html">Elements, Events and Filters</a></dd>
                  <dd><a href="/guides/blog/dynamic-rendering.html">Dynamic rendering</a></dd>
                  <dd><a href="/guides/blog/widgets.html">Widgets</a></dd>
                  <dd><a href="/guides/blog/helpers.html">Helpers</a></dd>
                  <dd><a href="/guides/blog/forms.html">Forms</a></dd>
                  <dd><a href="/guides/blog/preloaders.html">Preloaders</a></dd>
                  <dd><a href="/guides/blog/load-unload-and-in-progress-animations.html">Load, unload, animations</a></dd>
                </dl>
                <dl class="R">
                  <dt>Advanced guides</dt>
                  <dd><a href="/guides/advanced/search-engine-indexing.html">Search engine indexing</a></dd>
                  <dd><a href="/guides/advanded/authentication.html">Authentication</a></dd>
                  <dd><a href="/guides/advanced/permissions.html">Permissions and ACL</a></dd>
                  <dd><a href="/guides/advanced/template-engine.html">Template engines</a></dd>
                </dl>
              </div>
            </li> 
            <li><a href="/contribute.html">Contribute</a></li>
            <li><a href="/credits.html">Credits</a></li>
          </ul>
        </div>
      </div>
    </header>
    <div class="container">
      <section class="row">
        <div class="sixteen columns">
          <article class="hentry">
  <div class="entry-header">
    <h2>Rails preparations</h2>
  </div>
  <div class="entry-content">
    <div class="info">
  <p>
    Before you start, please ensure your system has Rails version >= 3.1. Versions prior to that are not supported due to lack of assets pipeline support.
  </p>
</div>

<h3>Dependencies and scaffolds</h3>

<p>Generate new Rails project:</p>

<script src="http://gist.github.com/2759363.js?file=Create project.sh">// Gist is loading...</script>

<p>Besides basic functionality Rails has to offer, we&#39;ll need to include <code>joosy</code> gem and the Twitter bootstrap assets to make our blog look better. This is the gemfile we are supposed to work with:</p>

<script src="http://gist.github.com/2759363.js?file=Gemfile.rb">// Gist is loading...</script>

<p>Now make bundler handle the dependencies:</p>

<script src="http://gist.github.com/2759363.js?file=Bundle.sh">// Gist is loading...</script>

<p>We need one more thing to do to include twitter bootstrap. Rename your <code>app/assets/stylesheets/application.css</code> to <code>app/assets/stylesheets/application.css.scss</code> and fill it with following content:</p>

<script src="http://gist.github.com/2759363.js?file=application.css.scss">// Gist is loading...</script>

<p>Using Rails scaffold let&#39;s prepare some entities we will need inside our blog:</p>

<script src="http://gist.github.com/2759363.js?file=Scaffold.sh">// Gist is loading...</script>

<p>We&#39;ll have to modify our models a bit to define an association. Another thing to do is to prepare some seeds.</p>

<script src="http://gist.github.com/2759363.js?file=Models.rb">// Gist is loading...</script>

<script src="http://gist.github.com/2759363.js?file=Seeds.rb">// Gist is loading...</script>

<p>Run <code>rake db:migrate</code> and <code>rake db:seed</code> to make your seeds real and that&#39;s pretty much it. Joosy is totally compatible with Rails basic scaffolds generators. You&#39;ll have an option to improve your code with better JSON builders and some logic but we&#39;ll concentrate on Joosy part for now.</p>

<h3>Joosy application generation</h3>

<p>Each Rails application can have several Joosy applications inside it. You can, for example, have separate applications for your front part and the admin one.</p>

<p>Let&#39;s start from generating the front part:</p>

<script src="http://gist.github.com/2759363.js?file=Generate Joosy Application.sh">// Gist is loading...</script>

<p>First command will create the application itself. The second one will generate required bootstrap to properly run it from Rails. It will by default create a controller by application name. It&#39;s safe to transfer it to any other controller you want but don&#39;t forget to update routes.</p>

<p>According to Rails Assets Pipeline your application is now situated in <code>app/assets/javascripts</code> folder. At top level we have:</p>

<div class="black_wheel">
  <pre>blog_preloader.js.coffee
blog_railties.js.coffee
blog/</pre>
</div>

<p>First one is required to boot the application. The <code>railties</code> file contains some options for backend integration. While <code>blog</code> directory contains application sources in it. We&#39;ll discuss bootstrap and preloaders in latter parts of blog creation so for now you should consider <code>app/assets/javascripts/blog</code> as a baseline.</p>

<div class="black_wheel">
  <pre>.
├── helpers
│   └── application.js.coffee
├── layouts
│   └── application.js.coffee
├── pages
│   ├── application.js.coffee
│   └── welcome
│       └── index.js.coffee
├── resources
├── routes.js.coffee
├── templates
│   ├── layouts
│   │   └── application.jst.hamlc
│   ├── pages
│   │   └── welcome
│   │       └── index.jst.hamlc
│   └── widgets
└── widgets</pre>
</div>

<p>Together with your first application structure you get sample page and layout. You either get your first templates and they are in HAML. If you never used HAML before you should <a href="http://haml-lang.com/">go try now</a>. Joosy bundles and uses excellent <a href="https://github.com/9elements/haml-coffee">CoffeScript-enabled HAML notation</a>. Within advanced topics we&#39;ll cover it how to change the template engine to anything like ECO or Jade. But you are encouraged to use HAML for now since all this guide is built on top of that. And it&#39;s just awesome, seriously.</p>

<p>To ensure everything is functioning properly run the ready bundle with <code>rails s</code> and go to <a href="http://localhost:3000/blog">localhost:3000/blog</a>. This is what you are supposed to see:</p>

<p><img src="http://cl.ly/221l423a0U33362x2V2g/Screen%20Shot%202012-02-11%20at%2011.28.49%20AM.png" alt=""></p>

<p>Congratulations! It works! It&#39;s time to go further to <a href="/guides/blog/resources.html">Resources</a>.</p>

  </div>
</article>

        </div>
      </section>
    </div>
    <div id="footer">
        <div class="wrapper">
            <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0</a> License</p>
            <p>Sources of this guide are available <a href="https://github.com/joosy/guides">on Github</a>.</p>
        </div>
    </div>
    <script type="text/javascript">
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4fb67f54f5a1f56550000016');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>
  </body>
</html>
