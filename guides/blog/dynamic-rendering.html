<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>— Joosy Guides</title>
    <meta charset='utf-8'>
    <meta content='width=device-width,initial-scale=1' name='viewport'>
    <link rel="stylesheet" href="/assets/base-2f6d13bb3c51816495f104715e9ee3c1.css">
    <link rel="stylesheet" href="/assets/skeleton-14b5052deb8c8ced10821b69b9a52fa2.css">
    <link rel="stylesheet" href="/assets/styles-71ff25841cb21929611316d79ede186e.css">
    <link rel="stylesheet" href="/assets/credits-e6732939ec05b46566fff3cae65a056a.css">
    <link href='http://yandex.st/highlightjs/6.2/styles/default.min.css' rel='stylesheet'>
    <script src='http://cachedcommons.org/cache/modernizr/1.5.0/javascripts/modernizr-min.js'></script>
    <script src="/assets/common-c4cc3efeff557aae5c8f06a8e05ae6ec.js"></script>
    <script src="/assets/prefixfree-ee666c3dce685b55f3b5516adf83c1ad.min"></script>
    <script src="/assets/jquery-1.7.2-beb5f7a7e585d3135f1a1996d48de6cd.min"></script>
    <script src="/assets/jquery-ebf9d7c82dcfa8fae4579fdea577bd7f.browser"></script>
    <script>
      function toggle(element) {
        element.style.display = (element.style.display == 'none') ? 'block' : 'none'
      }
    </script>
  </head>
  <body>
    <div class='topbar'>
      <div class='topbar_wrap'>
        <table cellpadding='0' cellspacing='0'>
          <tbody>
            <tr>
              <td>
                <a href='http://joosy.ws'>Joosy (1.1.0)</a>
              </td>
              <td class='disabled'>
                <a href='#'>Who's using</a>
              </td>
              <td>
                <a href='http://sample.joosy.ws'>Annotated sample</a>
              </td>
              <td class='active'>
                <a href='http://guides.joosy.ws'>Guides</a>
              </td>
              <td class='disabled'>
                <a href='#'>Screencasts</a>
              </td>
              <td>
                <a href='http://api.joosy.ws'>API</a>
              </td>
              <td>
                <a href='http://github.com/joosy/joosy'>Code</a>
              </td>
              <td>
                <a href='http://github.com/joosy/joosy/issues'>Bugs/Patches</a>
              </td>
              <td class='disabled'>
                <a href='#'>Community</a>
              </td>
              <td class='twitter'>
                <a href='http://twitter.com/joosy_web'>Twitter</a>
                <img src="/assets/twit_sign_orange-1fc0877f6185532d65317b6fc4824fd9.png">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <header>
      <div class='container'>
        <div class='six columns'>
          <h1>
            <a href='/'>Joosy Guides</a>
          </h1>
        </div>
        <div class='ten columns'>
          <ul class='nav'>
            <li>
              <a href='/'>Home</a>
            </li>
            <li>
              <a class='index' href='#' onclick="toggle(document.getElementById('guides'))">Guides Index ▼</a>
              <div class='clearfix' id='guides' style='display: none;'>
                <hr>
                <dl class='L'>
                  <dt>Joosy basics</dt>
                  <dd>
                    <a href='/guides/basics/getting-started.html'>Getting Started</a>
                  </dd>
                  <dd>
                    <a href='/guides/basics/joosy-vs-x.html'>Joosy vs X</a>
                  </dd>
                  <dt>Creating a blog on Joosy</dt>
                  <dd>
                    <a href='/guides/blog/rails-preparations.html'>Rails preparations</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/resources.html'>Resources</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/layouts-pages-and-routing.html'>Layouts, Pages and Routing</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/elements-events-and-filters.html'>Elements, Events and Filters</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/dynamic-rendering.html'>Dynamic rendering</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/widgets.html'>Widgets</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/helpers.html'>Helpers</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/forms.html'>Forms</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/preloaders.html'>Preloaders</a>
                  </dd>
                  <dd>
                    <a href='/guides/blog/load-unload-and-in-progress-animations.html'>Load, unload, animations</a>
                  </dd>
                </dl>
                <dl class='R'>
                  <dt>Advanced guides</dt>
                  <dd>
                    <a href='/guides/advanced/search-engine-indexing.html'>Search engine indexing</a>
                  </dd>
                  <dd>
                    <a href='/guides/advanded/authentication.html'>Authentication</a>
                  </dd>
                  <dd>
                    <a href='/guides/advanced/permissions.html'>Permissions and ACL</a>
                  </dd>
                  <dd>
                    <a href='/guides/advanced/template-engine.html'>Template engines</a>
                  </dd>
                </dl>
              </div>
            </li>
            <li>
              <a href='/contribute.html'>Contribute</a>
            </li>
            <li>
              <a href='/credits.html'>Credits</a>
            </li>
          </ul>
        </div>
      </div>
    </header>
    <div class='container'>
      <section class='row'>
        <div class='sixteen columns'>
          <article class='hentry'>
  <div class='entry-header'>
    <h2></h2>
  </div>
  <div class='entry-content'>
    <p>During this chapter we&#39;ll implement inline post title editing. It will be available at <code>post/show</code> page. As you click on the title it gets replaced with the inline form. After that the submit title shows up again, but with the new value.</p>

<h2>Templates and partials scopes</h2>

<p>While working on forms we already faced partials of templates. Just like in Rails, partials are just other templates that get included. While <code>@render</code> seems a really easy-to-use thing (and it really is), it has its ace in the hole. Common approach for the most of template engines is to accept a Hash as the context of rendering. With Joosy you can either pass in the Resource and the Collection. Remember that any other types besides Object, Resource, Collection will raise an exception.</p>

<script src="http://gist.github.com/2827878.js?file=Template Scopes.coffee">// Gist is loading...</script>

<p>Note that <code>@data</code> variable you use at a page is internally used exactly as a rendering context. So it shares the same rules, you can fill it with Resource or Collection, not only a Hash (like we did everywhere before).</p>

<h2>Dynamic partials</h2>

<p>Joosy has the ability to keep partial up-to-date. It&#39;s being achieved by using <a href="http://api.joosy.ws/mixins/Joosy/Modules/Events.html">Events</a>. As soon as any of partial scope variables triggers <code>changed</code> event, Joosy will rerender exactly this part of page with the same instances. You can use this manually but two typical use cases are Resource and Collection that do trigger <code>changed</code> event on each modification.</p>

<p>Open up your <code>posts/show</code> template and move the title header into partial.</p>

<script src="http://gist.github.com/2827878.js?file=Partial.haml">// Gist is loading...</script>

<p>Now let the magic begin! Open up your console being at <code>/blog/#!/posts/1</code> page. And call something like <code>Joosy.Application.page.data.post(&#39;title&#39;, &#39;test&#39;)</code>. See? It reloads the partial and the new title appears on the page as soon as you modify resource.</p>

<h2>Inline title editor</h2>

<p>We need to modify <code>post/show</code> once more to add the hidden form.</p>

<script src="http://gist.github.com/2827878.js?file=Form.haml">// Gist is loading...</script>

<p>Everything else should be quite familiar if you did read the previous guides. These are the additions to the Posts.ShowPage:</p>

<script src="http://gist.github.com/2827878.js?file=Editor.coffee">// Gist is loading...</script>

<p>Note the Line 14. As soon as server responds successfully, we modify the resource and it immediately gets updated at DOM.</p>

<p>And now that our inline editor is ready why not copy that to index page? To keep code clean and avoid duplication <a href="/guides/blog/widgets.html">the next chapter</a> will describe the clear way to achieve this using Widgets.</p>

  </div>
</article>

        </div>
      </section>
    </div>
    <div id='footer'>
      <div class='wrapper'>
        <p>
          This work is licensed under a
          <a href='http://creativecommons.org/licenses/by-sa/3.0/'>Creative Commons Attribution-Share Alike 3.0</a>
          License
        </p>
        <p>
          Sources of this guide are available
          <a href='https://github.com/joosy/guides'>on Github</a>.
        </p>
      </div>
    </div>
    <script>
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4fb67f54f5a1f56550000016');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>
  </body>
</html>
