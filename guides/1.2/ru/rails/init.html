<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Установка и использование генераторов — Joosy Guides</title>
    <meta charset='utf-8'>
    <link href='http://joosy.ws/application.css' rel='stylesheet'>
    <link href='//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/assets/application-a08ca23316077c59bf0b1e4ef0c2b346.css">
    <script src='http://codeorigin.jquery.com/jquery-1.10.2.min.js' type='text/javascript'></script>
    <script src='//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js' type='text/javascript'></script>
  </head>
  <body>
    <nav class='navbar navbar-inverse'>
      <div class='container'>
        <div class='collapse navbar-collapse'>
          <ul class='nav navbar-nav'>
            <li>
              <a href='http://joosy.ws'>
                Joosy
              </a>
            </li>
            <li class='disabled'>
              <a href='javascript:void(0)'>
                Download
              </a>
            </li>
            <li class='active'>
              <a href='http://guides.joosy.ws'>
                Guides
              </a>
            </li>
            <li>
              <a href='http://api.joosy.ws'>
                API
              </a>
            </li>
            <li>
              <a href='http://sample.joosy.ws'>
                Annotated sample
              </a>
            </li>
            <li class='disabled'>
              <a href='javascript:void(0)'>
                Screencasts
              </a>
            </li>
            <li>
              <a href='http://github.com/joosy/joosy/issues'>
                Bugs
              </a>
            </li>
            <li class='disabled'>
              <a href='javascript:void(0)'>
                Community
              </a>
            </li>
            <li class='twitter'>
              <a href="https://twitter.com/joosy_web" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Twitter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class='content'>
  <header>
    <div class='container'>
      <img alt='Joosy framework' class='pull-left logo' src='http://joosy.ws/joosy.png'>
      <p class='pull-left'>
        Guides for version 1.2
        <a href='/'>
          Another version or language?
        </a>
      </p>
      <div class='menu pull-right'>
        <ul class='nav nav-pills'>
          <li class=''>
            <a href='/guides/1.2/ru'>
              <i class='icon-archive'></i>
              Index
            </a>
          </li>
          <li class='active'>
            <div id='guides'>
              
              <dl class='pull-left'>
  <dt>Joosy и Rails</dt>
  <dd>
    <ul>
      <li>
        <a href='/guides/1.2/ru/rails/init.html'>Установка и генераторы</a>
      </li>
    </ul>
  </dd>
  <dt class='inner'>Ресурсы Joosy</dt>
  <dd>
    <ul>
      <li>
        <a href='/guides/1.2/ru/rails/resources/preparations.html'>Подготовка Backend</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/resources/main.html'>Основные возможности</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/resources/autogeneration.html'>Авто-генерация</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/resources/filters-and-associations.html'>Фильтры и ассоциации</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/resources/pagination.html'>Разбиение на страницы</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/resources/cacher.html'>Cacher</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/resources/identity-map.html'>Identity Map</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/resources/alternate-accessors.html'>Альтернативный интерфейс акцессоров</a>
      </li>
    </ul>
  </dd>
  <dt class='inner'>Рендеринг</dt>
  <dd>
    <ul>
      <li>
        <a href='/guides/1.2/ru/rails/render/pages-layouts.html'>Страницы и лейауты</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/templates.html'>Шаблоны</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/routing.html'>Роутинг</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/elements-events.html'>Элементы и события</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/forms.html'>Формы</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/filters.html'>Фильтры</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/dynamic-rendering.html'>Динамический рендеринг</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/helpers.html'>Хэлперы</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/widgets-and-modules.html'>Виджеты и модули</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/render/animations.html'>Анимация</a>
      </li>
    </ul>
  </dd>
  <dt class='inner'>Дополнительные возможности</dt>
  <dd>
    <ul>
      <li>
        <a href='/guides/1.2/ru/rails/advanced/config.html'>Конфигурация Joosy</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/advanced/events.html'>События Joosy</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/rails/advanced/preloading.html'>Предзагрузка JS-файлов</a>
      </li>
    </ul>
  </dd>
</dl>
<dl class='pull-right'>
  <dt>Основы Joosy</dt>
  <dd>
    <ul>
      <li>
        <a href='/guides/1.2/ru/basics/understanding-joosy.html'>Как устроен Joosy</a>
      </li>
      <li>
        <a href='/guides/1.2/ru/basics/why-joosy.html'>Почему Joosy</a>
      </li>
    </ul>
  </dd>
  <dt class='inner'>Joosy и Node.js</dt>
  <dd>
    <ul>
      <li>
        <a href='/guides/1.2/ru/nodejs/init.html'>Генерация приложения</a>
      </li>
    </ul>
  </dd>
</dl>

            </div>
            <a class='dropdown-toggle' data-target='#guides' data-toggle='dropdown' href='#guides'>
              <i class='icon-long-arrow-down'></i>
              Guides
            </a>
          </li>
        </ul>
      </div>
    </div>
  </header>
  <section class='main'>
    <article class='entry'>
      <div class='entry-header'>
        <h2></h2>
      </div>
      <div class='entry-content l-ru v-1-2'>
        <div class='info'><p>Пожалуйста, убедитесь, что спользуете версию Rails &gt;= 4.0.0</p>
</div>

<h2>Зависимости и настройки</h2>

<p>Нам понадобится один свежий Rails проект - создайте его коммандой</p>

<div class="highlight"><pre><code class="bash"><span class="lineno">1</span>   rails new blog
</code></pre></div>

<p>Joosy использует отдельный layout так, что удалять Turbolinks не обязательно, а вот добавить <a href="http://getbootstrap.com">Twitter Bootstrap</a> не помешает. Он значительно облегчит оформление внешнего вида нашего проекта.</p>

<p>Отредактируйте <code>Gemfile</code> и подключите  необходимые гемы:</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span>   <span class="n">source</span> <span class="s1">&#39;https://rubygems.org&#39;</span>
<span class="lineno"> 2</span>  
<span class="lineno"> 3</span>   <span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;4.0.0&#39;</span>
<span class="lineno"> 4</span>   <span class="n">gem</span> <span class="s1">&#39;sqlite3&#39;</span>
<span class="lineno"> 5</span>   <span class="n">gem</span> <span class="s1">&#39;sass-rails&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 4.0.0&#39;</span>
<span class="lineno"> 6</span>   <span class="n">gem</span> <span class="s1">&#39;uglifier&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;= 1.3.0&#39;</span>
<span class="lineno"> 7</span>   <span class="n">gem</span> <span class="s1">&#39;coffee-rails&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 4.0.0&#39;</span>
<span class="lineno"> 8</span>   <span class="n">gem</span> <span class="s1">&#39;jquery-rails&#39;</span>
<span class="lineno"> 9</span>   <span class="n">gem</span> <span class="s1">&#39;turbolinks&#39;</span>
<span class="lineno">10</span>   <span class="n">gem</span> <span class="s1">&#39;jbuilder&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.2&#39;</span>
<span class="lineno">11</span>    
<span class="lineno">12</span>   <span class="n">group</span> <span class="ss">:doc</span> <span class="k">do</span>
<span class="lineno">13</span>     <span class="n">gem</span> <span class="s1">&#39;sdoc&#39;</span><span class="p">,</span> <span class="nb">require</span><span class="p">:</span> <span class="kp">false</span>
<span class="lineno">14</span>   <span class="k">end</span>
<span class="lineno">15</span>    
<span class="lineno">16</span>   <span class="n">gem</span> <span class="s2">&quot;joosy-rails&quot;</span><span class="p">,</span> <span class="s2">&quot;1.0.0.RC2&quot;</span>      <span class="c1"># &lt;- сам Joosy</span>
<span class="lineno">17</span>   <span class="n">gem</span> <span class="s1">&#39;bootstrap-sass&#39;</span>                <span class="c1"># &lt;- CSS для Twitter Bootstrap</span>
<span class="lineno">18</span>   <span class="n">gem</span> <span class="s1">&#39;font-awesome-sass-rails&#39;</span>       <span class="c1"># &lt;- Иконочный шрифт Font Awesome</span>
</code></pre></div>

<p>Справившись с этой задачей можно смело его задействовать: переименуйте <code>app/assets/stylesheets/application.css</code> в <code>application.css.scss</code> и добавьте следующие строки:</p>

<div class="highlight"><pre><code class="scss"><span class="lineno">1</span>   <span class="k">@import</span> <span class="s1">&#39;</span><span class="s2">bootstrap&#39;</span><span class="p">;</span>
<span class="lineno">2</span>   <span class="k">@import</span> <span class="s1">&#39;</span><span class="s2">font-awesome&#39;</span><span class="p">;</span>
<span class="lineno">3</span>    
<span class="lineno">4</span>   <span class="nt">body</span> <span class="p">{</span>
<span class="lineno">5</span>       <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="lineno">6</span>   <span class="p">}</span>
</code></pre></div>

<p>Теперь настало время позаботиться о зависимостях и перейти к программированнию! Выполните</p>

<div class="highlight"><pre><code class="bash"><span class="lineno">1</span>   bundle install
</code></pre></div>

<h2>Создание Joosy приложения</h2>

<p>Каждый Rails  проект может содержать внутри себя несколько Joosy приложений. Например, раздельные пользовательский интерфейс и административную панель.</p>

<p>В нашем случае мы будем использовать одно глобальное приложение:</p>

<div class="highlight"><pre><code class="bash"><span class="lineno">1</span>   rails g joosy:application
</code></pre></div>

<p>Таким образом генерируется каркас приложения, который в соответствии с Assets Pipeline располагается в директории <code>app/assets/javascripts</code>.</p>

<div class='black_wheel'><pre>
  exist  app/assets/javascripts
  create  app/assets/javascripts/application.coffee
  create  app/assets/javascripts/helpers/application.coffee
  create  app/assets/javascripts/layouts/application.coffee
  create  app/assets/javascripts/pages/application.coffee
  create  app/assets/javascripts/pages/welcome/index.coffee
  create  app/assets/javascripts/routes.coffee
  create  app/assets/javascripts/templates/layouts/application.jst.hamlc
  create  app/assets/javascripts/templates/pages/welcome/index.jst.hamlc
  create  app/assets/javascripts/application.js-old
  remove  app/assets/javascripts/application.js
  create  app/views/layouts/joosy.html.erb
   route  joosy '/'
</pre></div>

<p>Отдельно обратите внимание на две последних строчки приведенного ниже списка. Запуск браузерной части происходит из сгенерированного Layout&#39;а и если вы хотите повлиять на то как Joosy запускается &mdash; вам именно сюда. При этом сам Layout загружается с помощью специального хелпера по указанному маршруту.</p>

<p>Вместе с разметкой приложение содержит стартовую страницу в HAML-формате. В дальнейшем мы рассмотрим как заменить его на другой формат ECO или JADE, но поскольку HAML наш любимый формат мы рекомендуем использовать именно его, так, как он великолепен. Серьезно! ;)</p>

<p>Тем временем наступил черед демо - смело запускайте <code>rails s</code> и открывайте <a href="http://localhost:3000">http://localhost:3000</a>, где Вас встретит начальная страница Joosy-приложения:</p>

<p><img src="http://i.imgur.com/2XMSWbo.png" alt="Начальная страница Joosy-приложения"></p>

<h2>Генераторы</h2>

<p>Если вы все-таки хотите изолировать ваше Joosy-приложение от другого JS-кода, попробуйте запустить генератор с указанием имени приложения:</p>

<div class="highlight"><pre><code class="bash"><span class="lineno">1</span>   rails g joosy:application front
</code></pre></div>

<p>Такой запуск позволит разместить новое приложение в папке <code>app/assets/javascripts/front</code> и заранее подготовить его к работе из поддиректории. Обратите внимание, что недостаточно просто перенести проект из одной папки в другую, необходимо также указать путь в <a href="/guides/1.2/ru/other/config.html">конфигурационной опции <code>prefix</code></a>.</p>

<p>В Joosy есть несколько основных компонентов, – ресурсы, страницы, Layout&#39;ы и виджеты. Для каждой из этих сущностей есть генератор:</p>

<div class="highlight"><pre><code class="bash"><span class="lineno">1</span>   rails g joosy:page page_name <span class="o">[</span>application<span class="o">]</span>
<span class="lineno">2</span>   rails g joosy:layout layout_name <span class="o">[</span>application<span class="o">]</span>
<span class="lineno">3</span>   rails g joosy:widget widget_name <span class="o">[</span>application<span class="o">]</span>
<span class="lineno">4</span>   rails g joosy:resource resource_name <span class="o">[</span>application<span class="o">]</span>
</code></pre></div>

<p>Второй необязательный параметр содержит имя приложения, если вы его используете. Например в вышеизложенном случае это был бы <code>front</code>. Обратите внимание, что имена компонентов могут содержать путь и Joosy автоматически разместит их в указанной поддиректории, а также укажет вашим классам правильный Namespace.</p>

<ul>
<li><strong><a href="/guides/1.2/ru/">Оглавление</a></strong></li>
<li>&#8594; <a href="/guides/1.2/ru/rails/resources/preparations.html">Ресурсы: Подготовка Backend</a></li>
</ul>

      </div>
    </article>
  </section>
</div>

    <footer class='container'>
      <div class='pull-left'>
        <p>
          <strong>
            Copyright 2012-2013,
            <a href='http://staal.io'>
              Boris Staal
            </a>
          </strong>
          <br>
          <small>
            <span>
              Hosted at
            </span><a href='http://pages.github.com'>Github Pages</a>,
            <span>
              generated with
            </span><a href='http://jekyllrb.com'>Jekyll</a></small>
        </p>
      </div>
      <div class='pull-right'>
        <p>
          Want to improve something on this site?
          <br><a href='https://github.com/joosy/guides'>Pull requests</a><span>
            are very welcome!
          </span>
        </p>
      </div>
    </footer>
    <a href='https://github.com/joosy/joosy' id='github'>
      <img alt='Fork me on GitHub' src='https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png' style='position: absolute; top: 0; right: 0; border: 0;'>
    </a>
    <script>
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4fb67f54f5a1f56550000016');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>
  </body>
</html>
